/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, Input, Output, ViewChild, ContentChild, NgZone, ElementRef, EventEmitter, ChangeDetectorRef, ChangeDetectionStrategy } from '@angular/core';
import { Directionality } from '@angular/cdk/bidi';
import { fromEvent, Observable, Subject } from 'rxjs';
import { filter, map, pairwise, pluck, takeUntil, tap } from 'rxjs/operators';
import { ScrollViewport } from './scroll-viewport';
import { SmoothScrollManager } from 'ngx-scrollbar/smooth-scroll';
import { ScrollbarManager } from './utils/scrollbar-manager';
import { NativeScrollbarSizeFactory } from './utils/native-scrollbar-size-factory';
var NgScrollbar = /** @class */ (function () {
    function NgScrollbar(el, zone, changeDetectorRef, dir, smoothScroll, manager, nativeScrollbarSizeFactory) {
        this.el = el;
        this.zone = zone;
        this.changeDetectorRef = changeDetectorRef;
        this.dir = dir;
        this.smoothScroll = smoothScroll;
        this.manager = manager;
        this.nativeScrollbarSizeFactory = nativeScrollbarSizeFactory;
        /**
         * A class forwarded to scrollable viewport element
         */
        this.viewClass = this.manager.globalOptions.viewClass;
        /**
         * A class forwarded to the scrollbar track element
         */
        this.trackClass = this.manager.globalOptions.trackClass;
        /**
         * A class forwarded to the scrollbar thumb element
         */
        this.thumbClass = this.manager.globalOptions.thumbClass;
        /**
         * Minimum scrollbar thumb size
         */
        this.minThumbSize = this.manager.globalOptions.minThumbSize;
        /**
         * The duration which the scrolling takes to reach its target when scrollbar rail is clicked
         */
        this.trackClickScrollDuration = this.manager.globalOptions.trackClickScrollDuration;
        /**
         * A flag used to enable/disable the scrollbar track clicked event
         */
        this.trackClickDisabled = this.manager.globalOptions.trackClickDisabled;
        /**
         * A flag used to enable/disable the scrollbar thumb dragged event
         */
        this.thumbDragDisabled = this.manager.globalOptions.thumbDragDisabled;
        /**
         * Disable custom scrollbar and switch back to native scrollbar
         */
        this.disabled = false;
        /**
         * Sets the supported scroll track of the viewport, there are 3 options:
         *
         * - `vertical` Use both vertical and horizontal scrollbar
         * - `horizontal` Use both vertical and horizontal scrollbar
         * - `all` Use both vertical and horizontal scrollbar
         */
        this.track = this.manager.globalOptions.track;
        /**
         * When to show the scrollbar, and there are 3 options:
         *
         * - `native` (default) Scrollbar will be visible when viewport is scrollable like with native scrollbar
         * - `hover` Scrollbars are hidden by default, only visible on scrolling or hovering
         * - `always` Scrollbars are always shown even if the viewport is not scrollable
         */
        this.visibility = this.manager.globalOptions.visibility;
        /**
         *  Sets the appearance of the scrollbar, there are 2 options:
         *
         * - `standard` (default) scrollbar space will be reserved just like with native scrollbar.
         * - `compact` scrollbar doesn't reserve any space, they are placed over the viewport.
         */
        this.appearance = this.manager.globalOptions.appearance;
        /**
         * Sets the position of each scrollbar, there are 4 options:
         *
         * - `native` (Default) Use the default position like in native scrollbar.
         * - `invertY` Inverts vertical scrollbar position
         * - `invertX` Inverts Horizontal scrollbar position
         * - `invertAll` Inverts both scrollbar positions
         */
        this.position = this.manager.globalOptions.position;
        /**
         * Debounce interval for detecting changes via ResizeObserver
         */
        this.sensorDebounce = this.manager.globalOptions.sensorDebounce;
        /**
         * Whether ResizeObserver is disabled
         */
        this.sensorDisabled = this.manager.globalOptions.sensorDisabled;
        /**
         * Steam that emits when scrollbar is updated
         */
        this.updated = new EventEmitter();
        /**
         * Set of attributes added on the scrollbar wrapper
         */
        this.state = {};
        /**
         * Stream that destroys components' observables
         */
        this.destroyed = new Subject();
    }
    /**
     * @private
     * @param {?} track
     * @return {?}
     */
    NgScrollbar.prototype.getScrolledByDirection = /**
     * @private
     * @param {?} track
     * @return {?}
     */
    function (track) {
        /** @type {?} */
        var scrollProperty = track === 'vertical' ? 'scrollTop' : 'scrollLeft';
        /** @type {?} */
        var event;
        return this.scrolled.pipe(tap((/**
         * @param {?} e
         * @return {?}
         */
        function (e) { return event = e; })), pluck('target', scrollProperty), pairwise(), filter((/**
         * @param {?} __0
         * @return {?}
         */
        function (_a) {
            var _b = tslib_1.__read(_a, 2), prev = _b[0], curr = _b[1];
            return prev !== curr;
        })), map((/**
         * @return {?}
         */
        function () { return event; })));
    };
    /**
     * Update local state with each change detection
     */
    /**
     * Update local state with each change detection
     * @private
     * @return {?}
     */
    NgScrollbar.prototype.updateState = /**
     * Update local state with each change detection
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var verticalUsed = false;
        /** @type {?} */
        var horizontalUsed = false;
        /** @type {?} */
        var isVerticallyScrollable = false;
        /** @type {?} */
        var isHorizontallyScrollable = false;
        // Check if vertical scrollbar should be displayed
        if (this.track === 'all' || this.track === 'vertical') {
            isVerticallyScrollable = this.viewport.scrollHeight > this.viewport.clientHeight;
            verticalUsed = this.visibility === 'always' || isVerticallyScrollable;
        }
        // Check if horizontal scrollbar should be displayed
        if (this.track === 'all' || this.track === 'horizontal') {
            isHorizontallyScrollable = this.viewport.scrollWidth > this.viewport.clientWidth;
            horizontalUsed = this.visibility === 'always' || isHorizontallyScrollable;
        }
        this._updateState({
            position: this.position,
            track: this.track,
            appearance: this.appearance,
            visibility: this.visibility,
            disabled: this.disabled,
            dir: this.dir.value,
            verticalUsed: verticalUsed,
            horizontalUsed: horizontalUsed,
            isVerticallyScrollable: isVerticallyScrollable,
            isHorizontallyScrollable: isHorizontallyScrollable
        });
    };
    /**
     * @private
     * @param {?} state
     * @return {?}
     */
    NgScrollbar.prototype._updateState = /**
     * @private
     * @param {?} state
     * @return {?}
     */
    function (state) {
        this.state = tslib_1.__assign({}, this.state, state);
        this.changeDetectorRef.detectChanges();
    };
    /**
     * @param {?} hovered
     * @return {?}
     */
    NgScrollbar.prototype.setHovered = /**
     * @param {?} hovered
     * @return {?}
     */
    function (hovered) {
        var _this = this;
        this.zone.run((/**
         * @return {?}
         */
        function () { return _this._updateState(tslib_1.__assign({}, hovered)); }));
    };
    /**
     * @param {?} dragging
     * @return {?}
     */
    NgScrollbar.prototype.setDragging = /**
     * @param {?} dragging
     * @return {?}
     */
    function (dragging) {
        var _this = this;
        this.zone.run((/**
         * @return {?}
         */
        function () { return _this._updateState(tslib_1.__assign({}, dragging)); }));
    };
    /**
     * Set the viewport based on user choice
     */
    /**
     * Set the viewport based on user choice
     * @private
     * @return {?}
     */
    NgScrollbar.prototype.setViewport = /**
     * Set the viewport based on user choice
     * @private
     * @return {?}
     */
    function () {
        var _a;
        if (this.customViewPort) {
            // Set the custom viewport as the scroll viewport
            this.viewport = this.customViewPort.viewPort.nativeElement;
            // In this case the default viewport and the default content wrapper will act as a mask
            this.viewportClasses = {
                'ng-scroll-offset': true,
                'ng-scroll-layer': true
            };
            this.defaultViewPort.nativeElement.firstElementChild.className = 'ng-scroll-layer';
        }
        else {
            // Set the default viewport as the scroll viewport
            this.viewport = this.defaultViewPort.nativeElement;
            this.viewportClasses = (_a = {
                    'ng-scroll-offset': true,
                    'ng-scroll-viewport': true
                },
                _a[this.viewClass] = true,
                _a);
        }
        // Check if the custom viewport has only one child and set it as the content wrapper
        if (this.viewport.firstElementChild) {
            this.contentWrapper = (/** @type {?} */ (this.viewport.firstElementChild));
            this.contentWrapper.classList.add('ng-scroll-content');
        }
    };
    /**
     * @return {?}
     */
    NgScrollbar.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.zone.runOutsideAngular((/**
         * @return {?}
         */
        function () {
            _this.setViewport();
            // Initialize scroll streams
            _this.scrolled = new Observable((/**
             * @param {?} observer
             * @return {?}
             */
            function (observer) {
                return fromEvent(_this.viewport, 'scroll', { passive: true }).pipe(takeUntil(_this.destroyed))
                    .subscribe(observer);
            }));
            _this.verticalScrolled = _this.getScrolledByDirection('vertical');
            _this.horizontalScrolled = _this.getScrolledByDirection('horizontal');
        }));
    };
    /**
     * @return {?}
     */
    NgScrollbar.prototype.ngAfterViewChecked = /**
     * @return {?}
     */
    function () {
        this.updateState();
    };
    /**
     * @return {?}
     */
    NgScrollbar.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this.destroyed.next();
        this.destroyed.complete();
    };
    /**
     * Update local state and the internal scrollbar controls
     */
    /**
     * Update local state and the internal scrollbar controls
     * @return {?}
     */
    NgScrollbar.prototype.update = /**
     * Update local state and the internal scrollbar controls
     * @return {?}
     */
    function () {
        this.updated.next();
        this.changeDetectorRef.detectChanges();
    };
    /**
     * Smooth scroll functions
     */
    /**
     * Smooth scroll functions
     * @param {?} options
     * @return {?}
     */
    NgScrollbar.prototype.scrollTo = /**
     * Smooth scroll functions
     * @param {?} options
     * @return {?}
     */
    function (options) {
        return this.smoothScroll.scrollTo(this.viewport, options);
    };
    /**
     * Scroll to element by reference or selector
     */
    /**
     * Scroll to element by reference or selector
     * @param {?} target
     * @param {?=} options
     * @return {?}
     */
    NgScrollbar.prototype.scrollToElement = /**
     * Scroll to element by reference or selector
     * @param {?} target
     * @param {?=} options
     * @return {?}
     */
    function (target, options) {
        return this.smoothScroll.scrollToElement(this.viewport, target, options);
    };
    NgScrollbar.decorators = [
        { type: Component, args: [{
                    selector: 'ng-scrollbar',
                    exportAs: 'ngScrollbar',
                    template: "<div class=\"ng-scrollbar-wrapper\" [ngAttr]=\"state\">\r\n  <div class=\"ng-scroll-viewport-wrapper\"\r\n       resizeSensor\r\n       [sensorDebounce]=\"sensorDebounce\"\r\n       [sensorDisabled]=\"sensorDisabled\">\r\n    <div #viewport\r\n         [ngClass]=\"viewportClasses\"\r\n         [style]=\"nativeScrollbarSizeFactory.nativeScrollbarSize | async | cssVariable: 'native-scrollbar-size'\">\r\n      <div>\r\n        <ng-content></ng-content>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <ng-container *ngIf=\"!disabled\">\r\n    <scrollbar-control *ngIf=\"state.verticalUsed\"\r\n                       track=\"vertical\"\r\n                       [attr.scrollable]=\"state.isVerticallyScrollable\"\r\n                       [attr.fit]=\"state.horizontalUsed\">\r\n    </scrollbar-control>\r\n    <scrollbar-control *ngIf=\"state.horizontalUsed\"\r\n                       track=\"horizontal\"\r\n                       [attr.scrollable]=\"state.isHorizontallyScrollable\"\r\n                       [attr.fit]=\"state.verticalUsed\">\r\n    </scrollbar-control>\r\n  </ng-container>\r\n</div>\r\n\r\n",
                    changeDetection: ChangeDetectionStrategy.OnPush,
                    host: { '[class.ng-scrollbar]': 'true' },
                    styles: ["::ng-deep .ng-scrollbar-measure{left:0;overflow:scroll;position:fixed;top:-9999px}:host{--scrollbar-border-radius:7px;--scrollbar-padding:4px;--scrollbar-track-color:transparent;--scrollbar-thumb-color:rgba(0, 0, 0, 0.2);--scrollbar-thumb-hover-color:var(--scrollbar-thumb-color);--scrollbar-size:5px;--scrollbar-hover-size:var(--scrollbar-size);display:block;position:relative;height:100%}:host>.ng-scrollbar-wrapper{--scrollbar-total-size:calc(var(--scrollbar-size) + var(--scrollbar-padding) * 2);--vertical-scrollbar-size:var(--scrollbar-size);--horizontal-scrollbar-size:var(--scrollbar-size);--vertical-scrollbar-total-size:calc(var(--vertical-scrollbar-size) + var(--scrollbar-padding) * 2);--horizontal-scrollbar-total-size:calc(var(--horizontal-scrollbar-size) + var(--scrollbar-padding) * 2)}:host>.ng-scrollbar-wrapper[verticalDragging=true],:host>.ng-scrollbar-wrapper[verticalHovered=true]{--vertical-scrollbar-size:var(--scrollbar-hover-size);--vertical-scrollbar-total-size:calc(var(--vertical-scrollbar-size) + var(--scrollbar-padding) * 2);cursor:default}:host>.ng-scrollbar-wrapper[horizontalDragging=true],:host>.ng-scrollbar-wrapper[horizontalHovered=true]{--horizontal-scrollbar-size:var(--scrollbar-hover-size);--horizontal-scrollbar-total-size:calc(var(--horizontal-scrollbar-size) + var(--scrollbar-padding) * 2);cursor:default}:host>.ng-scrollbar-wrapper[disabled=false][appearance=standard][verticalUsed=true][dir=ltr]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[disabled=false][appearance=standard][verticalUsed=true][dir=ltr]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{padding-right:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[disabled=false][appearance=standard][verticalUsed=true][dir=rtl]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[disabled=false][appearance=standard][verticalUsed=true][dir=rtl]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{padding-left:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[disabled=false][appearance=standard][verticalUsed=true][position=invertAll][dir=ltr]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[disabled=false][appearance=standard][verticalUsed=true][position=invertAll][dir=ltr]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[disabled=false][appearance=standard][verticalUsed=true][position=invertY][dir=ltr]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[disabled=false][appearance=standard][verticalUsed=true][position=invertY][dir=ltr]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{padding-left:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[disabled=false][appearance=standard][verticalUsed=true][position=invertAll][dir=rtl]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[disabled=false][appearance=standard][verticalUsed=true][position=invertAll][dir=rtl]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[disabled=false][appearance=standard][verticalUsed=true][position=invertY][dir=rtl]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[disabled=false][appearance=standard][verticalUsed=true][position=invertY][dir=rtl]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{padding-right:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[disabled=false][appearance=standard][horizontalUsed=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[disabled=false][appearance=standard][horizontalUsed=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{padding-bottom:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[disabled=false][appearance=standard][horizontalUsed=true][position=invertAll]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[disabled=false][appearance=standard][horizontalUsed=true][position=invertAll]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[disabled=false][appearance=standard][horizontalUsed=true][position=invertX]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[disabled=false][appearance=standard][horizontalUsed=true][position=invertX]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{padding-top:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[disabled=false][horizontalUsed=true]>.ng-scroll-viewport-wrapper>.ng-scroll-offset{bottom:var(--native-scrollbar-size)}:host>.ng-scrollbar-wrapper[disabled=false][verticalUsed=true]>.ng-scroll-viewport-wrapper>.ng-scroll-offset{left:0;right:var(--native-scrollbar-size)}:host>.ng-scrollbar-wrapper[disabled=false][verticalUsed=true][dir=rtl]>.ng-scroll-viewport-wrapper>.ng-scroll-offset{right:0;left:var(--native-scrollbar-size)}:host>.ng-scrollbar-wrapper[disabled=false][visibility=hover]>.scrollbar-control{opacity:0;transition-property:opacity;transition-duration:.4s;transition-delay:.8s}:host>.ng-scrollbar-wrapper[disabled=false][visibility=hover]:active>.scrollbar-control,:host>.ng-scrollbar-wrapper[disabled=false][visibility=hover]:focus>.scrollbar-control,:host>.ng-scrollbar-wrapper[disabled=false][visibility=hover]:hover>.scrollbar-control{opacity:1;transition-duration:.4s;transition-delay:0s}:host>.ng-scrollbar-wrapper[horizontalUsed=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[horizontalUsed=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{overflow-x:auto;overflow-y:hidden}:host>.ng-scrollbar-wrapper[verticalUsed=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[verticalUsed=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{overflow-y:auto;overflow-x:hidden}:host>.ng-scrollbar-wrapper[verticalUsed=true][horizontalUsed=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[verticalUsed=true][horizontalUsed=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{overflow:auto}.ng-scroll-viewport-wrapper{overflow:hidden}.ng-scroll-viewport{-ms-scroll-chaining:contain contain;overscroll-behavior:contain contain;-webkit-overflow-scrolling:touch;contain:strict;will-change:scroll-position}::ng-deep .ng-scroll-content{position:relative!important;display:inline-block;min-width:100%}.ng-scroll-layer,.ng-scroll-viewport-wrapper,.ng-scrollbar-wrapper,::ng-deep .ng-scroll-viewport{position:absolute;left:0;right:0;top:0;bottom:0}"]
                }] }
    ];
    /** @nocollapse */
    NgScrollbar.ctorParameters = function () { return [
        { type: ElementRef },
        { type: NgZone },
        { type: ChangeDetectorRef },
        { type: Directionality },
        { type: SmoothScrollManager },
        { type: ScrollbarManager },
        { type: NativeScrollbarSizeFactory }
    ]; };
    NgScrollbar.propDecorators = {
        defaultViewPort: [{ type: ViewChild, args: ['viewport', { static: true },] }],
        customViewPort: [{ type: ContentChild, args: [ScrollViewport, { static: true },] }],
        viewClass: [{ type: Input }],
        trackClass: [{ type: Input }],
        thumbClass: [{ type: Input }],
        minThumbSize: [{ type: Input }],
        trackClickScrollDuration: [{ type: Input }],
        trackClickDisabled: [{ type: Input }],
        thumbDragDisabled: [{ type: Input }],
        disabled: [{ type: Input }],
        track: [{ type: Input }],
        visibility: [{ type: Input }],
        appearance: [{ type: Input }],
        position: [{ type: Input }],
        sensorDebounce: [{ type: Input }],
        sensorDisabled: [{ type: Input }],
        updated: [{ type: Output }]
    };
    return NgScrollbar;
}());
export { NgScrollbar };
if (false) {
    /**
     * Default viewport reference
     * @type {?}
     * @private
     */
    NgScrollbar.prototype.defaultViewPort;
    /**
     * Custom viewport reference
     * @type {?}
     * @private
     */
    NgScrollbar.prototype.customViewPort;
    /**
     * A class forwarded to scrollable viewport element
     * @type {?}
     */
    NgScrollbar.prototype.viewClass;
    /**
     * A class forwarded to the scrollbar track element
     * @type {?}
     */
    NgScrollbar.prototype.trackClass;
    /**
     * A class forwarded to the scrollbar thumb element
     * @type {?}
     */
    NgScrollbar.prototype.thumbClass;
    /**
     * Minimum scrollbar thumb size
     * @type {?}
     */
    NgScrollbar.prototype.minThumbSize;
    /**
     * The duration which the scrolling takes to reach its target when scrollbar rail is clicked
     * @type {?}
     */
    NgScrollbar.prototype.trackClickScrollDuration;
    /**
     * A flag used to enable/disable the scrollbar track clicked event
     * @type {?}
     */
    NgScrollbar.prototype.trackClickDisabled;
    /**
     * A flag used to enable/disable the scrollbar thumb dragged event
     * @type {?}
     */
    NgScrollbar.prototype.thumbDragDisabled;
    /**
     * Disable custom scrollbar and switch back to native scrollbar
     * @type {?}
     */
    NgScrollbar.prototype.disabled;
    /**
     * Sets the supported scroll track of the viewport, there are 3 options:
     *
     * - `vertical` Use both vertical and horizontal scrollbar
     * - `horizontal` Use both vertical and horizontal scrollbar
     * - `all` Use both vertical and horizontal scrollbar
     * @type {?}
     */
    NgScrollbar.prototype.track;
    /**
     * When to show the scrollbar, and there are 3 options:
     *
     * - `native` (default) Scrollbar will be visible when viewport is scrollable like with native scrollbar
     * - `hover` Scrollbars are hidden by default, only visible on scrolling or hovering
     * - `always` Scrollbars are always shown even if the viewport is not scrollable
     * @type {?}
     */
    NgScrollbar.prototype.visibility;
    /**
     *  Sets the appearance of the scrollbar, there are 2 options:
     *
     * - `standard` (default) scrollbar space will be reserved just like with native scrollbar.
     * - `compact` scrollbar doesn't reserve any space, they are placed over the viewport.
     * @type {?}
     */
    NgScrollbar.prototype.appearance;
    /**
     * Sets the position of each scrollbar, there are 4 options:
     *
     * - `native` (Default) Use the default position like in native scrollbar.
     * - `invertY` Inverts vertical scrollbar position
     * - `invertX` Inverts Horizontal scrollbar position
     * - `invertAll` Inverts both scrollbar positions
     * @type {?}
     */
    NgScrollbar.prototype.position;
    /**
     * Debounce interval for detecting changes via ResizeObserver
     * @type {?}
     */
    NgScrollbar.prototype.sensorDebounce;
    /**
     * Whether ResizeObserver is disabled
     * @type {?}
     */
    NgScrollbar.prototype.sensorDisabled;
    /**
     * Steam that emits when scrollbar is updated
     * @type {?}
     */
    NgScrollbar.prototype.updated;
    /**
     * Viewport Element
     * @type {?}
     */
    NgScrollbar.prototype.viewport;
    /**
     * Content Wrapper element
     * @type {?}
     */
    NgScrollbar.prototype.contentWrapper;
    /**
     * stream that emits on scroll event
     * @type {?}
     */
    NgScrollbar.prototype.scrolled;
    /**
     * Steam that emits scroll event for vertical scrollbar
     * @type {?}
     */
    NgScrollbar.prototype.verticalScrolled;
    /**
     * Steam that emits scroll event for horizontal scrollbar
     * @type {?}
     */
    NgScrollbar.prototype.horizontalScrolled;
    /**
     * Default viewport classes
     * @type {?}
     */
    NgScrollbar.prototype.viewportClasses;
    /**
     * Set of attributes added on the scrollbar wrapper
     * @type {?}
     */
    NgScrollbar.prototype.state;
    /**
     * Stream that destroys components' observables
     * @type {?}
     * @private
     */
    NgScrollbar.prototype.destroyed;
    /**
     * @type {?}
     * @private
     */
    NgScrollbar.prototype.el;
    /**
     * @type {?}
     * @private
     */
    NgScrollbar.prototype.zone;
    /**
     * @type {?}
     * @private
     */
    NgScrollbar.prototype.changeDetectorRef;
    /**
     * @type {?}
     * @private
     */
    NgScrollbar.prototype.dir;
    /**
     * @type {?}
     * @private
     */
    NgScrollbar.prototype.smoothScroll;
    /** @type {?} */
    NgScrollbar.prototype.manager;
    /** @type {?} */
    NgScrollbar.prototype.nativeScrollbarSizeFactory;
}
/**
 * @record
 */
function ScrollbarDragging() { }
if (false) {
    /** @type {?|undefined} */
    ScrollbarDragging.prototype.verticalDragging;
    /** @type {?|undefined} */
    ScrollbarDragging.prototype.horizontalDragging;
}
/**
 * @record
 */
function ScrollbarHovered() { }
if (false) {
    /** @type {?|undefined} */
    ScrollbarHovered.prototype.verticalHovered;
    /** @type {?|undefined} */
    ScrollbarHovered.prototype.horizontalHovered;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmctc2Nyb2xsYmFyLmpzIiwic291cmNlUm9vdCI6Im5nOi8vbmd4LXNjcm9sbGJhci8iLCJzb3VyY2VzIjpbImxpYi9uZy1zY3JvbGxiYXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQ0wsU0FBUyxFQUNULEtBQUssRUFDTCxNQUFNLEVBQ04sU0FBUyxFQUNULFlBQVksRUFJWixNQUFNLEVBQ04sVUFBVSxFQUNWLFlBQVksRUFDWixpQkFBaUIsRUFDakIsdUJBQXVCLEVBQ3hCLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUNuRCxPQUFPLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBWSxPQUFPLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDaEUsT0FBTyxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsR0FBRyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDOUUsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ25ELE9BQU8sRUFBdUIsbUJBQW1CLEVBQXlCLE1BQU0sNkJBQTZCLENBQUM7QUFJOUcsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFDN0QsT0FBTyxFQUFFLDBCQUEwQixFQUFFLE1BQU0sdUNBQXVDLENBQUM7QUFFbkY7SUFvRkUscUJBQW9CLEVBQWMsRUFDZCxJQUFZLEVBQ1osaUJBQW9DLEVBQ3BDLEdBQW1CLEVBQ25CLFlBQWlDLEVBQ2xDLE9BQXlCLEVBQ3pCLDBCQUFzRDtRQU5yRCxPQUFFLEdBQUYsRUFBRSxDQUFZO1FBQ2QsU0FBSSxHQUFKLElBQUksQ0FBUTtRQUNaLHNCQUFpQixHQUFqQixpQkFBaUIsQ0FBbUI7UUFDcEMsUUFBRyxHQUFILEdBQUcsQ0FBZ0I7UUFDbkIsaUJBQVksR0FBWixZQUFZLENBQXFCO1FBQ2xDLFlBQU8sR0FBUCxPQUFP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bEUsaUNBQWlGOzs7Ozs7OztJQU9qRixpQ0FBaUY7Ozs7Ozs7Ozs7SUFTakYsK0JBQTJFOzs7OztJQUUzRSxxQ0FBNEU7Ozs7O0lBRTVFLHFDQUE2RTs7Ozs7SUFFN0UsOEJBQTZDOzs7OztJQUU3QywrQkFBc0I7Ozs7O0lBRXRCLHFDQUF3Qzs7Ozs7SUFFeEMsK0JBQTBCOzs7OztJQUUxQix1Q0FBa0M7Ozs7O0lBRWxDLHlDQUFvQzs7Ozs7SUFFcEMsc0NBQXFCOzs7OztJQUVyQiw0QkFBNkI7Ozs7OztJQUU3QixnQ0FBd0M7Ozs7O0lBRTVCLHlCQUFzQjs7Ozs7SUFDdEIsMkJBQW9COzs7OztJQUNwQix3Q0FBNEM7Ozs7O0lBQzVDLDBCQUEyQjs7Ozs7SUFDM0IsbUNBQXlDOztJQUN6Qyw4QkFBZ0M7O0lBQ2hDLGlEQUE2RDs7Ozs7QUEySTNFLGdDQUdDOzs7SUFGQyw2Q0FBMkI7O0lBQzNCLCtDQUE2Qjs7Ozs7QUFHL0IsK0JBR0M7OztJQUZDLDJDQUEwQjs7SUFDMUIsNkNBQTRCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcclxuICBDb21wb25lbnQsXHJcbiAgSW5wdXQsXHJcbiAgT3V0cHV0LFxyXG4gIFZpZXdDaGlsZCxcclxuICBDb250ZW50Q2hpbGQsXHJcbiAgT25Jbml0LFxyXG4gIEFmdGVyVmlld0NoZWNrZWQsXHJcbiAgT25EZXN0cm95LFxyXG4gIE5nWm9uZSxcclxuICBFbGVtZW50UmVmLFxyXG4gIEV2ZW50RW1pdHRlcixcclxuICBDaGFuZ2VEZXRlY3RvclJlZixcclxuICBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneVxyXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBEaXJlY3Rpb25hbGl0eSB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9iaWRpJztcclxuaW1wb3J0IHsgZnJvbUV2ZW50LCBPYnNlcnZhYmxlLCBPYnNlcnZlciwgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBmaWx0ZXIsIG1hcCwgcGFpcndpc2UsIHBsdWNrLCB0YWtlVW50aWwsIHRhcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcclxuaW1wb3J0IHsgU2Nyb2xsVmlld3BvcnQgfSBmcm9tICcuL3Njcm9sbC12aWV3cG9ydCc7XHJcbmltcG9ydCB7IFNtb290aFNjcm9sbEVsZW1lbnQsIFNtb290aFNjcm9sbE1hbmFnZXIsIFNtb290aFNjcm9sbFRvT3B0aW9ucyB9IGZyb20gJ25neC1zY3JvbGxiYXIvc21vb3RoLXNjcm9sbCc7XHJcbi8vIFVuY29tbWVudCB0aGUgZm9sbG93aW5nIGxpbmUgaW4gZGV2ZWxvcG1lbnQgbW9kZVxyXG4vLyBpbXBvcnQgeyBTbW9vdGhTY3JvbGxFbGVtZW50LCBTbW9vdGhTY3JvbGxNYW5hZ2VyLCBTbW9vdGhTY3JvbGxUb09wdGlvbnMgfSBmcm9tICcuLi8uLi9zbW9vdGgtc2Nyb2xsL3NyYy9wdWJsaWNfYXBpJztcclxuaW1wb3J0IHsgU2Nyb2xsYmFyQXBwZWFyYW5jZSwgU2Nyb2xsYmFyVHJhY2ssIFNjcm9sbGJhclBvc2l0aW9uLCBTY3JvbGxiYXJWaXNpYmlsaXR5LCBOZ1Njcm9sbGJhclN0YXRlIH0gZnJvbSAnLi9uZy1zY3JvbGxiYXIubW9kZWwnO1xyXG5pbXBvcnQgeyBTY3JvbGxiYXJNYW5hZ2VyIH0gZnJvbSAnLi91dGlscy9zY3JvbGxiYXItbWFuYWdlcic7XHJcbmltcG9ydCB7IE5hdGl2ZVNjcm9sbGJhclNpemVGYWN0b3J5IH0gZnJvbSAnLi91dGlscy9uYXRpdmUtc2Nyb2xsYmFyLXNpemUtZmFjdG9yeSc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ25nLXNjcm9sbGJhcicsXHJcbiAgZXhwb3J0QXM6ICduZ1Njcm9sbGJhcicsXHJcbiAgdGVtcGxhdGVVcmw6ICduZy1zY3JvbGxiYXIuaHRtbCcsXHJcbiAgc3R5bGVVcmxzOiBbJ25nLXNjcm9sbGJhci5zY3NzJ10sXHJcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXHJcbiAgaG9zdDogeyAnW2NsYXNzLm5nLXNjcm9sbGJhcl0nOiAndHJ1ZScgfVxyXG59KVxyXG5leHBvcnQgY2xhc3MgTmdTY3JvbGxiYXIgaW1wbGVtZW50cyBPbkluaXQsIEFmdGVyVmlld0NoZWNrZWQsIE9uRGVzdHJveSB7XHJcbiAgLyoqIERlZmF1bHQgdmlld3BvcnQgcmVmZXJlbmNlICovXHJcbiAgQFZpZXdDaGlsZCgndmlld3BvcnQnLCB7IHN0YXRpYzogdHJ1ZSB9KSBwcml2YXRlIGRlZmF1bHRWaWV3UG9ydDogRWxlbWVudFJlZjxIVE1MRWxlbWVudD47XHJcbiAgLyoqIEN1c3RvbSB2aWV3cG9ydCByZWZlcmVuY2UgKi9cclxuICBAQ29udGVudENoaWxkKFNjcm9sbFZpZXdwb3J0LCB7IHN0YXRpYzogdHJ1ZSB9KSBwcml2YXRlIGN1c3RvbVZpZXdQb3J0OiBTY3JvbGxWaWV3cG9ydDtcclxuICAvKiogQSBjbGFzcyBmb3J3YXJkZWQgdG8gc2Nyb2xsYWJsZSB2aWV3cG9ydCBlbGVtZW50ICovXHJcbiAgQElucHV0KCkgdmlld0NsYXNzOiBzdHJpbmcgPSB0aGlzLm1hbmFnZXIuZ2xvYmFsT3B0aW9ucy52aWV3Q2xhc3M7XHJcbiAgLyoqIEEgY2xhc3MgZm9yd2FyZGVkIHRvIHRoZSBzY3JvbGxiYXIgdHJhY2sgZWxlbWVudCAqL1xyXG4gIEBJbnB1dCgpIHRyYWNrQ2xhc3M6IHN0cmluZyA9IHRoaXMubWFuYWdlci5nbG9iYWxPcHRpb25zLnRyYWNrQ2xhc3M7XHJcbiAgLyoqIEEgY2xhc3MgZm9yd2FyZGVkIHRvIHRoZSBzY3JvbGxiYXIgdGh1bWIgZWxlbWVudCAqL1xyXG4gIEBJbnB1dCgpIHRodW1iQ2xhc3M6IHN0cmluZyA9IHRoaXMubWFuYWdlci5nbG9iYWxPcHRpb25zLnRodW1iQ2xhc3M7XHJcbiAgLyoqIE1pbmltdW0gc2Nyb2xsYmFyIHRodW1iIHNpemUgKi9cclxuICBASW5wdXQoKSBtaW5UaHVtYlNpemU6IG51bWJlciA9IHRoaXMubWFuYWdlci5nbG9iYWxPcHRpb25zLm1pblRodW1iU2l6ZTtcclxuICAvKiogVGhlIGR1cmF0aW9uIHdoaWNoIHRoZSBzY3JvbGxpbmcgdGFrZXMgdG8gcmVhY2ggaXRzIHRhcmdldCB3aGVuIHNjcm9sbGJhciByYWlsIGlzIGNsaWNrZWQgKi9cclxuICBASW5wdXQoKSB0cmFja0NsaWNrU2Nyb2xsRHVyYXRpb24gPSB0aGlzLm1hbmFnZXIuZ2xvYmFsT3B0aW9ucy50cmFja0NsaWNrU2Nyb2xsRHVyYXRpb247XHJcbiAgLyoqIEEgZmxhZyB1c2VkIHRvIGVuYWJsZS9kaXNhYmxlIHRoZSBzY3JvbGxiYXIgdHJhY2sgY2xpY2tlZCBldmVudCAqL1xyXG4gIEBJbnB1dCgpIHRyYWNrQ2xpY2tEaXNhYmxlZDogYm9vbGVhbiA9IHRoaXMubWFuYWdlci5nbG9iYWxPcHRpb25zLnRyYWNrQ2xpY2tEaXNhYmxlZDtcclxuICAvKiogQSBmbGFnIHVzZWQgdG8gZW5hYmxlL2Rpc2FibGUgdGhlIHNjcm9sbGJhciB0aHVtYiBkcmFnZ2VkIGV2ZW50ICovXHJcbiAgQElucHV0KCkgdGh1bWJEcmFnRGlzYWJsZWQ6IGJvb2xlYW4gPSB0aGlzLm1hbmFnZXIuZ2xvYmFsT3B0aW9ucy50aHVtYkRyYWdEaXNhYmxlZDtcclxuICAvKiogRGlzYWJsZSBjdXN0b20gc2Nyb2xsYmFyIGFuZCBzd2l0Y2ggYmFjayB0byBuYXRpdmUgc2Nyb2xsYmFyICovXHJcbiAgQElucHV0KCkgZGlzYWJsZWQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAvKipcclxuICAgKiBTZXRzIHRoZSBzdXBwb3J0ZWQgc2Nyb2xsIHRyYWNrIG9mIHRoZSB2aWV3cG9ydCwgdGhlcmUgYXJlIDMgb3B0aW9uczpcclxuICAgKlxyXG4gICAqIC0gYHZlcnRpY2FsYCBVc2UgYm90aCB2ZXJ0aWNhbCBhbmQgaG9yaXpvbnRhbCBzY3JvbGxiYXJcclxuICAgKiAtIGBob3Jpem9udGFsYCBVc2UgYm90aCB2ZXJ0aWNhbCBhbmQgaG9yaXpvbnRhbCBzY3JvbGxiYXJcclxuICAgKiAtIGBhbGxgIFVzZSBib3RoIHZlcnRpY2FsIGFuZCBob3Jpem9udGFsIHNjcm9sbGJhclxyXG4gICAqL1xyXG4gIEBJbnB1dCgpIHRyYWNrOiBTY3JvbGxiYXJUcmFjayA9IHRoaXMubWFuYWdlci5nbG9iYWxPcHRpb25zLnRyYWNrO1xyXG4gIC8qKlxyXG4gICAqIFdoZW4gdG8gc2hvdyB0aGUgc2Nyb2xsYmFyLCBhbmQgdGhlcmUgYXJlIDMgb3B0aW9uczpcclxuICAgKlxyXG4gICAqIC0gYG5hdGl2ZWAgKGRlZmF1bHQpIFNjcm9sbGJhciB3aWxsIGJlIHZpc2libGUgd2hlbiB2aWV3cG9ydCBpcyBzY3JvbGxhYmxlIGxpa2Ugd2l0aCBuYXRpdmUgc2Nyb2xsYmFyXHJcbiAgICogLSBgaG92ZXJgIFNjcm9sbGJhcnMgYXJlIGhpZGRlbiBieSBkZWZhdWx0LCBvbmx5IHZpc2libGUgb24gc2Nyb2xsaW5nIG9yIGhvdmVyaW5nXHJcbiAgICogLSBgYWx3YXlzYCBTY3JvbGxiYXJzIGFyZSBhbHdheXMgc2hvd24gZXZlbiBpZiB0aGUgdmlld3BvcnQgaXMgbm90IHNjcm9sbGFibGVcclxuICAgKi9cclxuICBASW5wdXQoKSB2aXNpYmlsaXR5OiBTY3JvbGxiYXJWaXNpYmlsaXR5ID0gdGhpcy5tYW5hZ2VyLmdsb2JhbE9wdGlvbnMudmlzaWJpbGl0eTtcclxuICAvKipcclxuICAgKiAgU2V0cyB0aGUgYXBwZWFyYW5jZSBvZiB0aGUgc2Nyb2xsYmFyLCB0aGVyZSBhcmUgMiBvcHRpb25zOlxyXG4gICAqXHJcbiAgICogLSBgc3RhbmRhcmRgIChkZWZhdWx0KSBzY3JvbGxiYXIgc3BhY2Ugd2lsbCBiZSByZXNlcnZlZCBqdXN0IGxpa2Ugd2l0aCBuYXRpdmUgc2Nyb2xsYmFyLlxyXG4gICAqIC0gYGNvbXBhY3RgIHNjcm9sbGJhciBkb2Vzbid0IHJlc2VydmUgYW55IHNwYWNlLCB0aGV5IGFyZSBwbGFjZWQgb3ZlciB0aGUgdmlld3BvcnQuXHJcbiAgICovXHJcbiAgQElucHV0KCkgYXBwZWFyYW5jZTogU2Nyb2xsYmFyQXBwZWFyYW5jZSA9IHRoaXMubWFuYWdlci5nbG9iYWxPcHRpb25zLmFwcGVhcmFuY2U7XHJcbiAgLyoqXHJcbiAgICogU2V0cyB0aGUgcG9zaXRpb24gb2YgZWFjaCBzY3JvbGxiYXIsIHRoZXJlIGFyZSA0IG9wdGlvbnM6XHJcbiAgICpcclxuICAgKiAtIGBuYXRpdmVgIChEZWZhdWx0KSBVc2UgdGhlIGRlZmF1bHQgcG9zaXRpb24gbGlrZSBpbiBuYXRpdmUgc2Nyb2xsYmFyLlxyXG4gICAqIC0gYGludmVydFlgIEludmVydHMgdmVydGljYWwgc2Nyb2xsYmFyIHBvc2l0aW9uXHJcbiAgICogLSBgaW52ZXJ0WGAgSW52ZXJ0cyBIb3Jpem9udGFsIHNjcm9sbGJhciBwb3NpdGlvblxyXG4gICAqIC0gYGludmVydEFsbGAgSW52ZXJ0cyBib3RoIHNjcm9sbGJhciBwb3NpdGlvbnNcclxuICAgKi9cclxuICBASW5wdXQoKSBwb3NpdGlvbjogU2Nyb2xsYmFyUG9zaXRpb24gPSB0aGlzLm1hbmFnZXIuZ2xvYmFsT3B0aW9ucy5wb3NpdGlvbjtcclxuICAvKiogRGVib3VuY2UgaW50ZXJ2YWwgZm9yIGRldGVjdGluZyBjaGFuZ2VzIHZpYSBSZXNpemVPYnNlcnZlciAqL1xyXG4gIEBJbnB1dCgpIHNlbnNvckRlYm91bmNlOiBudW1iZXIgPSB0aGlzLm1hbmFnZXIuZ2xvYmFsT3B0aW9ucy5zZW5zb3JEZWJvdW5jZTtcclxuICAvKiogV2hldGhlciBSZXNpemVPYnNlcnZlciBpcyBkaXNhYmxlZCAqL1xyXG4gIEBJbnB1dCgpIHNlbnNvckRpc2FibGVkOiBib29sZWFuID0gdGhpcy5tYW5hZ2VyLmdsb2JhbE9wdGlvbnMuc2Vuc29yRGlzYWJsZWQ7XHJcbiAgLyoqIFN0ZWFtIHRoYXQgZW1pdHMgd2hlbiBzY3JvbGxiYXIgaXMgdXBkYXRlZCAqL1xyXG4gIEBPdXRwdXQoKSB1cGRhdGVkID0gbmV3IEV2ZW50RW1pdHRlcjx2b2lkPigpO1xyXG4gIC8qKiBWaWV3cG9ydCBFbGVtZW50ICovXHJcbiAgdmlld3BvcnQ6IEhUTUxFbGVtZW50O1xyXG4gIC8qKiBDb250ZW50IFdyYXBwZXIgZWxlbWVudCAqL1xyXG4gIGNvbnRlbnRXcmFwcGVyOiBIVE1MRWxlbWVudCB8IHVuZGVmaW5lZDtcclxuICAvKiogc3RyZWFtIHRoYXQgZW1pdHMgb24gc2Nyb2xsIGV2ZW50ICovXHJcbiAgc2Nyb2xsZWQ6IE9ic2VydmFibGU8YW55PjtcclxuICAvKiogU3RlYW0gdGhhdCBlbWl0cyBzY3JvbGwgZXZlbnQgZm9yIHZlcnRpY2FsIHNjcm9sbGJhciAqL1xyXG4gIHZlcnRpY2FsU2Nyb2xsZWQ6IE9ic2VydmFibGU8YW55PjtcclxuICAvKiogU3RlYW0gdGhhdCBlbWl0cyBzY3JvbGwgZXZlbnQgZm9yIGhvcml6b250YWwgc2Nyb2xsYmFyICovXHJcbiAgaG9yaXpvbnRhbFNjcm9sbGVkOiBPYnNlcnZhYmxlPGFueT47XHJcbiAgLyoqIERlZmF1bHQgdmlld3BvcnQgY2xhc3NlcyAqL1xyXG4gIHZpZXdwb3J0Q2xhc3NlczogYW55O1xyXG4gIC8qKiBTZXQgb2YgYXR0cmlidXRlcyBhZGRlZCBvbiB0aGUgc2Nyb2xsYmFyIHdyYXBwZXIgKi9cclxuICBzdGF0ZTogTmdTY3JvbGxiYXJTdGF0ZSA9IHt9O1xyXG4gIC8qKiBTdHJlYW0gdGhhdCBkZXN0cm95cyBjb21wb25lbnRzJyBvYnNlcnZhYmxlcyAqL1xyXG4gIHByaXZhdGUgZGVzdHJveWVkID0gbmV3IFN1YmplY3Q8dm9pZD4oKTtcclxuXHJcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBlbDogRWxlbWVudFJlZixcclxuICAgICAgICAgICAgICBwcml2YXRlIHpvbmU6IE5nWm9uZSxcclxuICAgICAgICAgICAgICBwcml2YXRlIGNoYW5nZURldGVjdG9yUmVmOiBDaGFuZ2VEZXRlY3RvclJlZixcclxuICAgICAgICAgICAgICBwcml2YXRlIGRpcjogRGlyZWN0aW9uYWxpdHksXHJcbiAgICAgICAgICAgICAgcHJpdmF0ZSBzbW9vdGhTY3JvbGw6IFNtb290aFNjcm9sbE1hbmFnZXIsXHJcbiAgICAgICAgICAgICAgcHVibGljIG1hbmFnZXI6IFNjcm9sbGJhck1hbmFnZXIsXHJcbiAgICAgICAgICAgICAgcHVibGljIG5hdGl2ZVNjcm9sbGJhclNpemVGYWN0b3J5OiBOYXRpdmVTY3JvbGxiYXJTaXplRmFjdG9yeSkge1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRTY3JvbGxlZEJ5RGlyZWN0aW9uKHRyYWNrOiBTY3JvbGxiYXJUcmFjaykge1xyXG4gICAgY29uc3Qgc2Nyb2xsUHJvcGVydHk6IHN0cmluZyA9IHRyYWNrID09PSAndmVydGljYWwnID8gJ3Njcm9sbFRvcCcgOiAnc2Nyb2xsTGVmdCc7XHJcbiAgICBsZXQgZXZlbnQ6IGFueTtcclxuICAgIHJldHVybiB0aGlzLnNjcm9sbGVkLnBpcGUoXHJcbiAgICAgIHRhcCgoZTogYW55KSA9PiBldmVudCA9IGUpLFxyXG4gICAgICBwbHVjaygndGFyZ2V0Jywgc2Nyb2xsUHJvcGVydHkpLFxyXG4gICAgICBwYWlyd2lzZSgpLFxyXG4gICAgICBmaWx0ZXIoKFtwcmV2LCBjdXJyXSkgPT4gcHJldiAhPT0gY3VyciksXHJcbiAgICAgIG1hcCgoKSA9PiBldmVudClcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBVcGRhdGUgbG9jYWwgc3RhdGUgd2l0aCBlYWNoIGNoYW5nZSBkZXRlY3Rpb25cclxuICAgKi9cclxuICBwcml2YXRlIHVwZGF0ZVN0YXRlKCkge1xyXG4gICAgbGV0IHZlcnRpY2FsVXNlZDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgbGV0IGhvcml6b250YWxVc2VkOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBsZXQgaXNWZXJ0aWNhbGx5U2Nyb2xsYWJsZTogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgbGV0IGlzSG9yaXpvbnRhbGx5U2Nyb2xsYWJsZTogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAgIC8vIENoZWNrIGlmIHZlcnRpY2FsIHNjcm9sbGJhciBzaG91bGQgYmUgZGlzcGxheWVkXHJcbiAgICBpZiAodGhpcy50cmFjayA9PT0gJ2FsbCcgfHwgdGhpcy50cmFjayA9PT0gJ3ZlcnRpY2FsJykge1xyXG4gICAgICBpc1ZlcnRpY2FsbHlTY3JvbGxhYmxlID0gdGhpcy52aWV3cG9ydC5zY3JvbGxIZWlnaHQgPiB0aGlzLnZpZXdwb3J0LmNsaWVudEhlaWdodDtcclxuICAgICAgdmVydGljYWxVc2VkID0gdGhpcy52aXNpYmlsaXR5ID09PSAnYWx3YXlzJyB8fCBpc1ZlcnRpY2FsbHlTY3JvbGxhYmxlO1xyXG4gICAgfVxyXG4gICAgLy8gQ2hlY2sgaWYgaG9yaXpvbnRhbCBzY3JvbGxiYXIgc2hvdWxkIGJlIGRpc3BsYXllZFxyXG4gICAgaWYgKHRoaXMudHJhY2sgPT09ICdhbGwnIHx8IHRoaXMudHJhY2sgPT09ICdob3Jpem9udGFsJykge1xyXG4gICAgICBpc0hvcml6b250YWxseVNjcm9sbGFibGUgPSB0aGlzLnZpZXdwb3J0LnNjcm9sbFdpZHRoID4gdGhpcy52aWV3cG9ydC5jbGllbnRXaWR0aDtcclxuICAgICAgaG9yaXpvbnRhbFVzZWQgPSB0aGlzLnZpc2liaWxpdHkgPT09ICdhbHdheXMnIHx8IGlzSG9yaXpvbnRhbGx5U2Nyb2xsYWJsZTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl91cGRhdGVTdGF0ZSh7XHJcbiAgICAgIHBvc2l0aW9uOiB0aGlzLnBvc2l0aW9uLFxyXG4gICAgICB0cmFjazogdGhpcy50cmFjayxcclxuICAgICAgYXBwZWFyYW5jZTogdGhpcy5hcHBlYXJhbmNlLFxyXG4gICAgICB2aXNpYmlsaXR5OiB0aGlzLnZpc2liaWxpdHksXHJcbiAgICAgIGRpc2FibGVkOiB0aGlzLmRpc2FibGVkLFxyXG4gICAgICBkaXI6IHRoaXMuZGlyLnZhbHVlLFxyXG4gICAgICB2ZXJ0aWNhbFVzZWQsXHJcbiAgICAgIGhvcml6b250YWxVc2VkLFxyXG4gICAgICBpc1ZlcnRpY2FsbHlTY3JvbGxhYmxlLFxyXG4gICAgICBpc0hvcml6b250YWxseVNjcm9sbGFibGVcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBfdXBkYXRlU3RhdGUoc3RhdGU6IE5nU2Nyb2xsYmFyU3RhdGUpIHtcclxuICAgIHRoaXMuc3RhdGUgPSB7IC4uLnRoaXMuc3RhdGUsIC4uLnN0YXRlIH07XHJcbiAgICB0aGlzLmNoYW5nZURldGVjdG9yUmVmLmRldGVjdENoYW5nZXMoKTtcclxuICB9XHJcblxyXG4gIHNldEhvdmVyZWQoaG92ZXJlZDogU2Nyb2xsYmFySG92ZXJlZCkge1xyXG4gICAgdGhpcy56b25lLnJ1bigoKSA9PiB0aGlzLl91cGRhdGVTdGF0ZSh7IC4uLmhvdmVyZWQgfSkpO1xyXG4gIH1cclxuXHJcbiAgc2V0RHJhZ2dpbmcoZHJhZ2dpbmc6IFNjcm9sbGJhckRyYWdnaW5nKSB7XHJcbiAgICB0aGlzLnpvbmUucnVuKCgpID0+IHRoaXMuX3VwZGF0ZVN0YXRlKHsgLi4uZHJhZ2dpbmcgfSkpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2V0IHRoZSB2aWV3cG9ydCBiYXNlZCBvbiB1c2VyIGNob2ljZVxyXG4gICAqL1xyXG4gIHByaXZhdGUgc2V0Vmlld3BvcnQoKSB7XHJcbiAgICBpZiAodGhpcy5jdXN0b21WaWV3UG9ydCkge1xyXG4gICAgICAvLyBTZXQgdGhlIGN1c3RvbSB2aWV3cG9ydCBhcyB0aGUgc2Nyb2xsIHZpZXdwb3J0XHJcbiAgICAgIHRoaXMudmlld3BvcnQgPSB0aGlzLmN1c3RvbVZpZXdQb3J0LnZpZXdQb3J0Lm5hdGl2ZUVsZW1lbnQ7XHJcbiAgICAgIC8vIEluIHRoaXMgY2FzZSB0aGUgZGVmYXVsdCB2aWV3cG9ydCBhbmQgdGhlIGRlZmF1bHQgY29udGVudCB3cmFwcGVyIHdpbGwgYWN0IGFzIGEgbWFza1xyXG4gICAgICB0aGlzLnZpZXdwb3J0Q2xhc3NlcyA9IHtcclxuICAgICAgICAnbmctc2Nyb2xsLW9mZnNldCc6IHRydWUsXHJcbiAgICAgICAgJ25nLXNjcm9sbC1sYXllcic6IHRydWVcclxuICAgICAgfTtcclxuICAgICAgdGhpcy5kZWZhdWx0Vmlld1BvcnQubmF0aXZlRWxlbWVudC5maXJzdEVsZW1lbnRDaGlsZC5jbGFzc05hbWUgPSAnbmctc2Nyb2xsLWxheWVyJztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIFNldCB0aGUgZGVmYXVsdCB2aWV3cG9ydCBhcyB0aGUgc2Nyb2xsIHZpZXdwb3J0XHJcbiAgICAgIHRoaXMudmlld3BvcnQgPSB0aGlzLmRlZmF1bHRWaWV3UG9ydC5uYXRpdmVFbGVtZW50O1xyXG4gICAgICB0aGlzLnZpZXdwb3J0Q2xhc3NlcyA9IHtcclxuICAgICAgICAnbmctc2Nyb2xsLW9mZnNldCc6IHRydWUsXHJcbiAgICAgICAgJ25nLXNjcm9sbC12aWV3cG9ydCc6IHRydWUsXHJcbiAgICAgICAgW3RoaXMudmlld0NsYXNzXTogdHJ1ZSxcclxuICAgICAgfTtcclxuICAgIH1cclxuICAgIC8vIENoZWNrIGlmIHRoZSBjdXN0b20gdmlld3BvcnQgaGFzIG9ubHkgb25lIGNoaWxkIGFuZCBzZXQgaXQgYXMgdGhlIGNvbnRlbnQgd3JhcHBlclxyXG4gICAgaWYgKHRoaXMudmlld3BvcnQuZmlyc3RFbGVtZW50Q2hpbGQpIHtcclxuICAgICAgdGhpcy5jb250ZW50V3JhcHBlciA9IHRoaXMudmlld3BvcnQuZmlyc3RFbGVtZW50Q2hpbGQgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgIHRoaXMuY29udGVudFdyYXBwZXIuY2xhc3NMaXN0LmFkZCgnbmctc2Nyb2xsLWNvbnRlbnQnKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG5nT25Jbml0KCkge1xyXG4gICAgdGhpcy56b25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcclxuICAgICAgdGhpcy5zZXRWaWV3cG9ydCgpO1xyXG5cclxuICAgICAgLy8gSW5pdGlhbGl6ZSBzY3JvbGwgc3RyZWFtc1xyXG4gICAgICB0aGlzLnNjcm9sbGVkID0gbmV3IE9ic2VydmFibGUoKG9ic2VydmVyOiBPYnNlcnZlcjxhbnk+KSA9PlxyXG4gICAgICAgIGZyb21FdmVudCh0aGlzLnZpZXdwb3J0LCAnc2Nyb2xsJywgeyBwYXNzaXZlOiB0cnVlIH0pLnBpcGUodGFrZVVudGlsKHRoaXMuZGVzdHJveWVkKSlcclxuICAgICAgICAgIC5zdWJzY3JpYmUob2JzZXJ2ZXIpKTtcclxuXHJcbiAgICAgIHRoaXMudmVydGljYWxTY3JvbGxlZCA9IHRoaXMuZ2V0U2Nyb2xsZWRCeURpcmVjdGlvbigndmVydGljYWwnKTtcclxuICAgICAgdGhpcy5ob3Jpem9udGFsU2Nyb2xsZWQgPSB0aGlzLmdldFNjcm9sbGVkQnlEaXJlY3Rpb24oJ2hvcml6b250YWwnKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgbmdBZnRlclZpZXdDaGVja2VkKCkge1xyXG4gICAgdGhpcy51cGRhdGVTdGF0ZSgpO1xyXG4gIH1cclxuXHJcbiAgbmdPbkRlc3Ryb3koKSB7XHJcbiAgICB0aGlzLmRlc3Ryb3llZC5uZXh0KCk7XHJcbiAgICB0aGlzLmRlc3Ryb3llZC5jb21wbGV0ZSgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVXBkYXRlIGxvY2FsIHN0YXRlIGFuZCB0aGUgaW50ZXJuYWwgc2Nyb2xsYmFyIGNvbnRyb2xzXHJcbiAgICovXHJcbiAgdXBkYXRlKCkge1xyXG4gICAgdGhpcy51cGRhdGVkLm5leHQoKTtcclxuICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3JSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU21vb3RoIHNjcm9sbCBmdW5jdGlvbnNcclxuICAgKi9cclxuXHJcbiAgc2Nyb2xsVG8ob3B0aW9uczogU21vb3RoU2Nyb2xsVG9PcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICByZXR1cm4gdGhpcy5zbW9vdGhTY3JvbGwuc2Nyb2xsVG8odGhpcy52aWV3cG9ydCwgb3B0aW9ucyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTY3JvbGwgdG8gZWxlbWVudCBieSByZWZlcmVuY2Ugb3Igc2VsZWN0b3JcclxuICAgKi9cclxuICBzY3JvbGxUb0VsZW1lbnQodGFyZ2V0OiBTbW9vdGhTY3JvbGxFbGVtZW50LCBvcHRpb25zPyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgcmV0dXJuIHRoaXMuc21vb3RoU2Nyb2xsLnNjcm9sbFRvRWxlbWVudCh0aGlzLnZpZXdwb3J0LCB0YXJnZXQsIG9wdGlvbnMpO1xyXG4gIH1cclxufVxyXG5cclxuXHJcbmludGVyZmFjZSBTY3JvbGxiYXJEcmFnZ2luZyB7XHJcbiAgdmVydGljYWxEcmFnZ2luZz86IGJvb2xlYW47XHJcbiAgaG9yaXpvbnRhbERyYWdnaW5nPzogYm9vbGVhbjtcclxufVxyXG5cclxuaW50ZXJmYWNlIFNjcm9sbGJhckhvdmVyZWQge1xyXG4gIHZlcnRpY2FsSG92ZXJlZD86IGJvb2xlYW47XHJcbiAgaG9yaXpvbnRhbEhvdmVyZWQ/OiBib29sZWFuO1xyXG59XHJcbiJdfQ==