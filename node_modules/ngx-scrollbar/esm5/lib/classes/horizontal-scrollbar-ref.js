/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { RtlScrollAxisType } from '@angular/cdk/platform';
import { ScrollbarRef } from './scrollbar-ref';
var HorizontalScrollbarRef = /** @class */ (function (_super) {
    tslib_1.__extends(HorizontalScrollbarRef, _super);
    function HorizontalScrollbarRef(scrollbarRef, document, trackRef, thumbRef, platform, destroyed, dir) {
        var _this = _super.call(this, scrollbarRef, document, trackRef, thumbRef, platform, destroyed) || this;
        _this.scrollbarRef = scrollbarRef;
        _this.document = document;
        _this.platform = platform;
        _this.destroyed = destroyed;
        _this.dir = dir;
        return _this;
    }
    Object.defineProperty(HorizontalScrollbarRef.prototype, "scrollSize", {
        get: /**
         * @protected
         * @return {?}
         */
        function () {
            return this.viewElement.scrollWidth;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(HorizontalScrollbarRef.prototype, "viewportSize", {
        get: /**
         * @protected
         * @return {?}
         */
        function () {
            return this.viewElement.clientWidth;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(HorizontalScrollbarRef.prototype, "trackSize", {
        get: /**
         * @protected
         * @return {?}
         */
        function () {
            return this.trackElement.clientWidth;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(HorizontalScrollbarRef.prototype, "thumbSize", {
        get: /**
         * @protected
         * @return {?}
         */
        function () {
            return this.thumbElement.clientWidth;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(HorizontalScrollbarRef.prototype, "scrollOffset", {
        get: /**
         * @protected
         * @return {?}
         */
        function () {
            return this.viewElement.scrollLeft;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(HorizontalScrollbarRef.prototype, "dragOffset", {
        get: /**
         * @protected
         * @return {?}
         */
        function () {
            return this.trackElement.getBoundingClientRect().left;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(HorizontalScrollbarRef.prototype, "dragStartOffset", {
        get: /**
         * @protected
         * @return {?}
         */
        function () {
            return this.thumbElement.getBoundingClientRect().left;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(HorizontalScrollbarRef.prototype, "pageProperty", {
        get: /**
         * @protected
         * @return {?}
         */
        function () {
            return 'pageX';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(HorizontalScrollbarRef.prototype, "clientProperty", {
        get: /**
         * @protected
         * @return {?}
         */
        function () {
            return 'clientX';
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @private
     * @param {?} position
     * @param {?} trackMax
     * @return {?}
     */
    HorizontalScrollbarRef.prototype._handleThumbPosition = /**
     * @private
     * @param {?} position
     * @param {?} trackMax
     * @return {?}
     */
    function (position, trackMax) {
        if (this.dir.value === 'rtl') {
            if (this.scrollbarRef.manager.rtlScrollAxisType === RtlScrollAxisType.INVERTED) {
                return -position;
            }
            if (this.scrollbarRef.manager.rtlScrollAxisType === RtlScrollAxisType.NORMAL) {
                return position - trackMax;
            }
            // Keeping this as a memo
            // if (this.rtlScrollAxisType === RtlScrollAxisType.NEGATED) {
            //   return position;
            // }
        }
        return position;
    };
    /**
     * @protected
     * @param {?} position
     * @return {?}
     */
    HorizontalScrollbarRef.prototype.handleDragPosition = /**
     * @protected
     * @param {?} position
     * @return {?}
     */
    function (position) {
        if (this.dir.value === 'rtl') {
            if (this.scrollbarRef.manager.rtlScrollAxisType === RtlScrollAxisType.NEGATED) {
                return position - this.scrollMax;
            }
            if (this.scrollbarRef.manager.rtlScrollAxisType === RtlScrollAxisType.INVERTED) {
                return this.scrollMax - position;
            }
            // Keeping this as a memo
            // if (this.rtlScrollAxisType === RtlScrollAxisType.NORMAL) {
            //   return position;
            // }
        }
        return position;
    };
    /**
     * @protected
     * @return {?}
     */
    HorizontalScrollbarRef.prototype.scrolled = /**
     * @protected
     * @return {?}
     */
    function () {
        return this.scrollbarRef.horizontalScrolled;
    };
    /**
     * @protected
     * @param {?} size
     * @param {?} position
     * @param {?=} trackMax
     * @return {?}
     */
    HorizontalScrollbarRef.prototype.applyThumbStyle = /**
     * @protected
     * @param {?} size
     * @param {?} position
     * @param {?=} trackMax
     * @return {?}
     */
    function (size, position, trackMax) {
        this.thumbElement.style.width = size + "px";
        this.thumbElement.style.transform = "translate3d(" + this._handleThumbPosition(position, trackMax) + "px, 0, 0)";
    };
    /**
     * @protected
     * @param {?} value
     * @return {?}
     */
    HorizontalScrollbarRef.prototype.mapToScrollToOption = /**
     * @protected
     * @param {?} value
     * @return {?}
     */
    function (value) {
        return { left: value };
    };
    /**
     * @protected
     * @param {?} point
     * @return {?}
     */
    HorizontalScrollbarRef.prototype.scrollTo = /**
     * @protected
     * @param {?} point
     * @return {?}
     */
    function (point) {
        this.viewElement.scrollLeft = point;
    };
    /**
     * @protected
     * @param {?} value
     * @return {?}
     */
    HorizontalScrollbarRef.prototype.setHovered = /**
     * @protected
     * @param {?} value
     * @return {?}
     */
    function (value) {
        this.scrollbarRef.setHovered({ horizontalHovered: value });
    };
    /**
     * @protected
     * @param {?} value
     * @return {?}
     */
    HorizontalScrollbarRef.prototype.setDragging = /**
     * @protected
     * @param {?} value
     * @return {?}
     */
    function (value) {
        this.scrollbarRef.setDragging({ horizontalDragging: value });
    };
    return HorizontalScrollbarRef;
}(ScrollbarRef));
export { HorizontalScrollbarRef };
if (false) {
    /**
     * @type {?}
     * @protected
     */
    HorizontalScrollbarRef.prototype.scrollbarRef;
    /**
     * @type {?}
     * @protected
     */
    HorizontalScrollbarRef.prototype.document;
    /**
     * @type {?}
     * @protected
     */
    HorizontalScrollbarRef.prototype.platform;
    /**
     * @type {?}
     * @protected
     */
    HorizontalScrollbarRef.prototype.destroyed;
    /**
     * @type {?}
     * @protected
     */
    HorizontalScrollbarRef.prototype.dir;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaG9yaXpvbnRhbC1zY3JvbGxiYXItcmVmLmpzIiwic291cmNlUm9vdCI6Im5nOi8vbmd4LXNjcm9sbGJhci8iLCJzb3VyY2VzIjpbImxpYi9jbGFzc2VzL2hvcml6b250YWwtc2Nyb2xsYmFyLXJlZi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUNBLE9BQU8sRUFBa0MsaUJBQWlCLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUkxRixPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFHL0M7SUFBNEMsa0RBQVk7SUFzQ3RELGdDQUFzQixZQUF5QixFQUN6QixRQUFhLEVBQ3ZCLFFBQW9CLEVBQ3BCLFFBQW9CLEVBQ1YsUUFBa0IsRUFDbEIsU0FBd0IsRUFDeEIsR0FBbUI7UUFOekMsWUFPRSxrQkFBTSxZQUFZLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFLFNBQVMsQ0FBQyxTQUN2RTtRQVJxQixrQkFBWSxHQUFaLFlBQVksQ0FBYTtRQUN6QixjQUFRLEdBQVIsUUFBUSxDQUFLO1FBR2IsY0FBUSxHQUFSLFFBQVEsQ0FBVTtRQUNsQixlQUFTLEdBQVQsU0FBUyxDQUFlO1FBQ3hCLFNBQUcsR0FBSCxHQUFHLENBQWdCOztJQUV6QyxDQUFDO0lBNUNELHNCQUFjLDhDQUFVOzs7OztRQUF4QjtZQUNFLE9BQU8sSUFBSSxDQUFDLFdBQVcsQ0FBQyxXQUFXLENBQUM7UUFDdEMsQ0FBQzs7O09BQUE7SUFFRCxzQkFBYyxnREFBWTs7Ozs7UUFBMUI7WUFDRSxPQUFPLElBQUksQ0FBQyxXQUFXLENBQUMsV0FBVyxDQUFDO1FBQ3RDLENBQUM7OztPQUFBO0lBRUQsc0JBQWMsNkNBQVM7Ozs7O1FBQXZCO1lBQ0UsT0FBTyxJQUFJLENBQUMsWUFBWSxDQUFDLFdBQVcsQ0FBQztRQUN2QyxDQUFDOzs7T0FBQTtJQUVELHNCQUFjLDZDQUFTOzs7OztRQUF2QjtZQUNFLE9BQU8sSUFBSSxDQUFDLFlBQVksQ0FB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QXBCLFVBQXFCLEtBQWM7UUFDakMsSUFBSSxDQUFDLFlBQVksQ0FBQyxVQUFVLENBQUMsRUFBRSxpQkFBaUIsRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDO0lBQzdELENBQUM7Ozs7OztJQUVTLDRDQUFXOzs7OztJQUFyQixVQUFzQixLQUFjO1FBQ2xDLElBQUksQ0FBQyxZQUFZLENBQUMsV0FBVyxDQUFDLEVBQUUsa0JBQWtCLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQztJQUMvRCxDQUFDO0lBQ0gsNkJBQUM7QUFBRCxDQUFDLEFBeEdELENBQTRDLFlBQVksR0F3R3ZEOzs7Ozs7O0lBbEVhLDhDQUFtQzs7Ozs7SUFDbkMsMENBQXVCOzs7OztJQUd2QiwwQ0FBNEI7Ozs7O0lBQzVCLDJDQUFrQzs7Ozs7SUFDbEMscUNBQTZCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRWxlbWVudFJlZiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBnZXRSdGxTY3JvbGxBeGlzVHlwZSwgUGxhdGZvcm0sIFJ0bFNjcm9sbEF4aXNUeXBlIH0gZnJvbSAnQGFuZ3VsYXIvY2RrL3BsYXRmb3JtJztcclxuaW1wb3J0IHsgRGlyZWN0aW9uYWxpdHkgfSBmcm9tICdAYW5ndWxhci9jZGsvYmlkaSc7XHJcbmltcG9ydCB7IE9ic2VydmFibGUsIFN1YmplY3QgfSBmcm9tICdyeGpzJztcclxuXHJcbmltcG9ydCB7IFNjcm9sbGJhclJlZiB9IGZyb20gJy4vc2Nyb2xsYmFyLXJlZic7XHJcbmltcG9ydCB7IE5nU2Nyb2xsYmFyIH0gZnJvbSAnLi4vbmctc2Nyb2xsYmFyJztcclxuXHJcbmV4cG9ydCBjbGFzcyBIb3Jpem9udGFsU2Nyb2xsYmFyUmVmIGV4dGVuZHMgU2Nyb2xsYmFyUmVmIHtcclxuXHJcbiAgcHJvdGVjdGVkIGdldCBzY3JvbGxTaXplKCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy52aWV3RWxlbWVudC5zY3JvbGxXaWR0aDtcclxuICB9XHJcblxyXG4gIHByb3RlY3RlZCBnZXQgdmlld3BvcnRTaXplKCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy52aWV3RWxlbWVudC5jbGllbnRXaWR0aDtcclxuICB9XHJcblxyXG4gIHByb3RlY3RlZCBnZXQgdHJhY2tTaXplKCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy50cmFja0VsZW1lbnQuY2xpZW50V2lkdGg7XHJcbiAgfVxyXG5cclxuICBwcm90ZWN0ZWQgZ2V0IHRodW1iU2l6ZSgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMudGh1bWJFbGVtZW50LmNsaWVudFdpZHRoO1xyXG4gIH1cclxuXHJcbiAgcHJvdGVjdGVkIGdldCBzY3JvbGxPZmZzZXQoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLnZpZXdFbGVtZW50LnNjcm9sbExlZnQ7XHJcbiAgfVxyXG5cclxuICBwcm90ZWN0ZWQgZ2V0IGRyYWdPZmZzZXQoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLnRyYWNrRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0O1xyXG4gIH1cclxuXHJcbiAgcHJvdGVjdGVkIGdldCBkcmFnU3RhcnRPZmZzZXQoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLnRodW1iRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0O1xyXG4gIH1cclxuXHJcbiAgcHJvdGVjdGVkIGdldCBwYWdlUHJvcGVydHkoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiAncGFnZVgnO1xyXG4gIH1cclxuXHJcbiAgcHJvdGVjdGVkIGdldCBjbGllbnRQcm9wZXJ0eSgpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuICdjbGllbnRYJztcclxuICB9XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByb3RlY3RlZCBzY3JvbGxiYXJSZWY6IE5nU2Nyb2xsYmFyLFxyXG4gICAgICAgICAgICAgIHByb3RlY3RlZCBkb2N1bWVudDogYW55LFxyXG4gICAgICAgICAgICAgIHRyYWNrUmVmOiBFbGVtZW50UmVmLFxyXG4gICAgICAgICAgICAgIHRodW1iUmVmOiBFbGVtZW50UmVmLFxyXG4gICAgICAgICAgICAgIHByb3RlY3RlZCBwbGF0Zm9ybTogUGxhdGZvcm0sXHJcbiAgICAgICAgICAgICAgcHJvdGVjdGVkIGRlc3Ryb3llZDogU3ViamVjdDx2b2lkPixcclxuICAgICAgICAgICAgICBwcm90ZWN0ZWQgZGlyOiBEaXJlY3Rpb25hbGl0eSkge1xyXG4gICAgc3VwZXIoc2Nyb2xsYmFyUmVmLCBkb2N1bWVudCwgdHJhY2tSZWYsIHRodW1iUmVmLCBwbGF0Zm9ybSwgZGVzdHJveWVkKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgX2hhbmRsZVRodW1iUG9zaXRpb24ocG9zaXRpb246IG51bWJlciwgdHJhY2tNYXg6IG51bWJlcikge1xyXG4gICAgaWYgKHRoaXMuZGlyLnZhbHVlID09PSAncnRsJykge1xyXG4gICAgICBpZiAodGhpcy5zY3JvbGxiYXJSZWYubWFuYWdlci5ydGxTY3JvbGxBeGlzVHlwZSA9PT0gUnRsU2Nyb2xsQXhpc1R5cGUuSU5WRVJURUQpIHtcclxuICAgICAgICByZXR1cm4gLXBvc2l0aW9uO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLnNjcm9sbGJhclJlZi5tYW5hZ2VyLnJ0bFNjcm9sbEF4aXNUeXBlID09PSBSdGxTY3JvbGxBeGlzVHlwZS5OT1JNQUwpIHtcclxuICAgICAgICByZXR1cm4gcG9zaXRpb24gLSB0cmFja01heDtcclxuICAgICAgfVxyXG4gICAgICAvLyBLZWVwaW5nIHRoaXMgYXMgYSBtZW1vXHJcbiAgICAgIC8vIGlmICh0aGlzLnJ0bFNjcm9sbEF4aXNUeXBlID09PSBSdGxTY3JvbGxBeGlzVHlwZS5ORUdBVEVEKSB7XHJcbiAgICAgIC8vICAgcmV0dXJuIHBvc2l0aW9uO1xyXG4gICAgICAvLyB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcG9zaXRpb247XHJcbiAgfVxyXG5cclxuICBwcm90ZWN0ZWQgaGFuZGxlRHJhZ1Bvc2l0aW9uKHBvc2l0aW9uOiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgaWYgKHRoaXMuZGlyLnZhbHVlID09PSAncnRsJykge1xyXG4gICAgICBpZiAodGhpcy5zY3JvbGxiYXJSZWYubWFuYWdlci5ydGxTY3JvbGxBeGlzVHlwZSA9PT0gUnRsU2Nyb2xsQXhpc1R5cGUuTkVHQVRFRCkge1xyXG4gICAgICAgIHJldHVybiBwb3NpdGlvbiAtIHRoaXMuc2Nyb2xsTWF4O1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLnNjcm9sbGJhclJlZi5tYW5hZ2VyLnJ0bFNjcm9sbEF4aXNUeXBlID09PSBSdGxTY3JvbGxBeGlzVHlwZS5JTlZFUlRFRCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNjcm9sbE1heCAtIHBvc2l0aW9uO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIEtlZXBpbmcgdGhpcyBhcyBhIG1lbW9cclxuICAgICAgLy8gaWYgKHRoaXMucnRsU2Nyb2xsQXhpc1R5cGUgPT09IFJ0bFNjcm9sbEF4aXNUeXBlLk5PUk1BTCkge1xyXG4gICAgICAvLyAgIHJldHVybiBwb3NpdGlvbjtcclxuICAgICAgLy8gfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHBvc2l0aW9uO1xyXG4gIH1cclxuXHJcbiAgcHJvdGVjdGVkIHNjcm9sbGVkKCk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICByZXR1cm4gdGhpcy5zY3JvbGxiYXJSZWYuaG9yaXpvbnRhbFNjcm9sbGVkO1xyXG4gIH1cclxuXHJcbiAgcHJvdGVjdGVkIGFwcGx5VGh1bWJTdHlsZShzaXplOiBudW1iZXIsIHBvc2l0aW9uOiBudW1iZXIsIHRyYWNrTWF4PzogbnVtYmVyKTogdm9pZCB7XHJcbiAgICB0aGlzLnRodW1iRWxlbWVudC5zdHlsZS53aWR0aCA9IGAkeyBzaXplIH1weGA7XHJcbiAgICB0aGlzLnRodW1iRWxlbWVudC5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlM2QoJHsgdGhpcy5faGFuZGxlVGh1bWJQb3NpdGlvbihwb3NpdGlvbiwgdHJhY2tNYXgpIH1weCwgMCwgMClgO1xyXG4gIH1cclxuXHJcbiAgcHJvdGVjdGVkIG1hcFRvU2Nyb2xsVG9PcHRpb24odmFsdWU6IG51bWJlcik6IFNjcm9sbFRvT3B0aW9ucyB7XHJcbiAgICByZXR1cm4geyBsZWZ0OiB2YWx1ZSB9O1xyXG4gIH1cclxuXHJcbiAgcHJvdGVjdGVkIHNjcm9sbFRvKHBvaW50OiBudW1iZXIpOiB2b2lkIHtcclxuICAgIHRoaXMudmlld0VsZW1lbnQuc2Nyb2xsTGVmdCA9IHBvaW50O1xyXG4gIH1cclxuXHJcbiAgcHJvdGVjdGVkIHNldEhvdmVyZWQodmFsdWU6IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgIHRoaXMuc2Nyb2xsYmFyUmVmLnNldEhvdmVyZWQoeyBob3Jpem9udGFsSG92ZXJlZDogdmFsdWUgfSk7XHJcbiAgfVxyXG5cclxuICBwcm90ZWN0ZWQgc2V0RHJhZ2dpbmcodmFsdWU6IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgIHRoaXMuc2Nyb2xsYmFyUmVmLnNldERyYWdnaW5nKHsgaG9yaXpvbnRhbERyYWdnaW5nOiB2YWx1ZSB9KTtcclxuICB9XHJcbn1cclxuIl19